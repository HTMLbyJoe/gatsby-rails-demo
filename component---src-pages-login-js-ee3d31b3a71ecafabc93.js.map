{"version":3,"sources":["webpack:///./src/pages/login.js"],"names":["getCookie","name","parts","document","cookie","split","length","pop","shift","LoginPage","title","onSubmit","event","preventDefault","email","target","elements","value","password","fetch","credentials","then","method","headers","decodeURIComponent","body","JSON","stringify","placeholder","type","to"],"mappings":"yKAKMA,EAAY,SAACC,GAEjB,IACIC,GADQ,KAAOC,SAASC,QACVC,MAAM,KAAOJ,EAAO,KACtC,GAAqB,IAAjBC,EAAMI,OAAc,OAAOJ,EAAMK,MAAMF,MAAM,KAAKG,SAkCzCC,UA/BG,WAmBhB,OACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAM,eACX,0BAAMC,SArBS,SAACC,GAChBA,EAAMC,iBACN,IAAMC,EAAQF,EAAMG,OAAOC,SAASF,MAAMG,MACpCC,EAAWN,EAAMG,OAAOC,SAASE,SAASD,MAEhDE,MAAM,gCAAiC,CAAEC,YAAa,YAAaC,MAAK,WACtEF,MAAM,gCAAiC,CACrCG,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChB,eAAgBC,mBAAmBxB,EAAU,gBAE/CoB,YAAa,UACbK,KAAMC,KAAKC,UAAU,CAACb,QAAOI,oBAS/B,2BAAOU,YAAY,QAAQ3B,KAAK,UAChC,2BAAO2B,YAAY,WAAWC,KAAK,WAAW5B,KAAK,aACnD,4BAAQ4B,KAAK,UAAb,OAEF,kBAAC,OAAD,CAAMC,GAAG,KAAT","file":"component---src-pages-login-js-ee3d31b3a71ecafabc93.js","sourcesContent":["import React from 'react';\nimport { Link } from \"gatsby\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\n\nconst getCookie = (name) => {\n  // https://stackoverflow.com/a/15724300\n  var value = \"; \" + document.cookie;\n  var parts = value.split(\"; \" + name + \"=\");\n  if (parts.length === 2) return parts.pop().split(\";\").shift();\n};\n\nconst LoginPage = () => {\n  const onSubmit = (event) => {\n    event.preventDefault();\n    const email = event.target.elements.email.value;\n    const password = event.target.elements.password.value;\n\n    fetch('http://localhost:3000/sign_in', { credentials: 'include' }).then(() => {\n      fetch('http://localhost:3000/session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': decodeURIComponent(getCookie('CSRF-TOKEN')),\n        },\n        credentials: 'include',\n        body: JSON.stringify({email, password}),\n      });\n    });\n  };\n\n  return (\n  <Layout>\n    <SEO title=\"Login Page\" />\n    <form onSubmit={onSubmit}>\n      <input placeholder=\"Email\" name=\"email\" />\n      <input placeholder=\"Password\" type=\"password\" name=\"password\" />\n      <button type=\"submit\">Go</button>\n    </form>\n    <Link to=\"/\">Go back to the homepage</Link>\n  </Layout>\n)};\n\nexport default LoginPage\n"],"sourceRoot":""}